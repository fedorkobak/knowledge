
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Nginx &#8212; Knowledge base</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'other/nginx';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reverse proxy" href="nginx/reverse_proxy.html" />
    <link rel="prev" title="Zset" href="redis/zset.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.jpg" class="logo__image only-light" alt="Knowledge base - Home"/>
    <img src="../_static/logo.jpg" class="logo__image only-dark pst-js-only" alt="Knowledge base - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Knowlege
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Data science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../data_science/gradient_descent.html">Gradient descent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_science/decision_tree.html">Decision tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_science/models_selection_methods/l2_regularisation.html">L2 (Ridge regularisation)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data_science/metrics.html">Metrics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/cross_entropy.html">Cross entropy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/confusion_matrix.html">Confusion matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/pearson_correlation.html">Pearson correlation coefficient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/CAP.html">CAP curve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/GINI.html">GINI coeficient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/metrics/jaccard_index.html">Jaccard index</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data_science/ranking_task.html">Ranking task</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data_science/ranking_task/collaborative_filtering.html">Collaborative filtering</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_science/ranking_task/collaborative_filtering/prediction_functions.html">Prediction functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_science/ranking_task/collaborative_filtering/self_made_mem_based.html">Selfmade memory based</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/ranking_task/task_generation.html">Task generation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data_science/ranking_task/metrics.html">Metrics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_science/ranking_task/metrics/precision_k.html">precision@k</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_science/ranking_task/metrics/recall_k.html">recall@k</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_science/ranking_task/metrics/average_precision.html">AP@k (average precision)</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data_science/nlp.html">NLP</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_science/nlp/preprocessing.html">Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/nlp/tf_idf.html">TF-IDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/nlp/text_cnn.html">Text CNN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/nlp/recurrent_text_gen.html">Recurrent text gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_science/nlp/recurrent_translation.html">Recurrent translations</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data_science/dl_mechanisms.html">DL mechanisms</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_science/dl_mechanisms/recurrent.html">Recurrent</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Math</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../math/introduction.html">Intorduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../math/geometry.html">Geometry</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/geometry/triangle.html">Triangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/geometry/cone.html">Cone</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../math/trigonometry.html">Trigonometry</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/trigonometry/identities.html">Identities</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../math/mat_stat.html">MatStat</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/mat_stat/union_probability.html">Union probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/mat_stat/conditional_probability.html">Сonditional probability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/mat_stat/cent_limit_theorem.html">Central limit theorem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/mat_stat/maximum_likelihood.html">Maximum likelihood</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../math/mat_stat/stat_testing.html">Statistical testing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../math/mat_stat/stat_testing/binomial_test.html">Binomial test</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../math/latex.html">Latex</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../algorithms/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/complexity.html">Complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/trees.html">Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/dynamic_prog.html">Dynamic programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/quick_sort.html">Quick sort</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algorithms/specific_tasks.html">Specific tasks</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/specific_tasks/emergency_task.html">Emergency task</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/specific_tasks/sinking_islands.html">Sinling islands</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Docker</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../docker/overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/containers.html">Containers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker/containers/run.html">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/containers/execute_in.html">Execute in</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/containers/check_logs.html">Check logs</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/images.html">Images</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../docker/images/build_image.html">Build image</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../docker/images/build_image/build_context.html">Build context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../docker/images/build_image/ignore_files.html">Ignore files</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../docker/images/docker_file_directives.html">Dockerfile directives</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../docker/images/docker_file_directives/execute_with_run.html">Execute with start</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/volumes.html">Volumes</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/networks.html">Networks</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker/networks/default_networks.html">Default networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/networks/container_communication.html">Containers communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/networks/local_network.html">Local network</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/access.html">Acesss to containers</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docker/compose.html">Compose</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker/compose/up_down.html">Up/down</a></li>

<li class="toctree-l2"><a class="reference internal" href="../docker/compose/service_configuration.html">Service configuration</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Git</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../git/overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../git/file_stages.html">File statuses</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/file_stages/commit.html">Commit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/file_stages/remove_from_staging.html">Remove from staging</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../git/diff.html">Difference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/checkout.html">Checkout</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../git/branches.html">Branches</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/branches/merge.html">Merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/branches/remote.html">Remotes</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../git/log.html">Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/previous_commit.html">Previous commit <code class="docutils literal notranslate"><span class="pre">~</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/ignore.html">How git ignore works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/stash.html">Stash</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../git/configuration.html">Configuration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/configuration/variables.html">Variables</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">SQL</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../sql/intro.html">Intro</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sql/select.html">Select</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sql/select/join.html">JOIN</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql/select/join/join_types.html">Join types</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/sorting.html">Sorting (ORDER BY)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/unique_values.html">Unique values (DISTINCT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/empty_values.html">Empty values</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sql/select/aggregation_functions.html">Aggregation functions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql/select/aggregation_functions/collect_array.html">Collect array</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sql/select/group_by.html">Group by</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql/select/group_by/conditions_on_aggregats.html">Conditions on aggregats (HAVING)</a></li>



</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sql/select/window_functions.html">Window functions (OVER)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../sql/select/window_functions/functions.html">Functions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../sql/select/window_functions/functions/values_shifting_lag_lead.html">Values shifting (LAG/LEAD)</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/expand_array.html">Expand array</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/conditional.html">Conditional (CASE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/records_range.html">Records range (OFFSET/LIMIT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/select/performance.html">Performance</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sql/operating_tables.html">Operating tables</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sql/operating_tables/tables_properties.html">Tables properties</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sql/datatypes.html">Data types</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sql/datatypes/datetime.html">Date and time</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql/datatypes/datetime/date_components.html">Date components (DATE_PART)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql/datatypes/datetime/add_period.html">Add period</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/datatypes/json.html">JSON</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../sql/load_modify.html">Load/Modify</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql/versions_issues.html">Versions issues</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sql/python_interaction.html">Python interaction</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sql/python_interaction/python_from_container.html">Python from container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/python_interaction/python_on_host.html">Python on host</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/python_interaction/create_database.html">Create database</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Layout</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../layout/terminology.html">Terminology</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../layout/html.html">HTML</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../layout/html/other.html">Other</a></li>



<li class="toctree-l2"><a class="reference internal" href="../layout/html/text_format.html">Text format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/html/tables.html">Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/html/lists.html">List tags</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../layout/html/svg.html">SVG</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../layout/html/svg/text.html">Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="../layout/html/svg/path.html">Path</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../layout/css.html">CSS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../layout/css/other.html">Other</a></li>







<li class="toctree-l2"><a class="reference internal" href="../layout/css/style_application.html">Style application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/css/margin.html">Margin (out space)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/css/padding.html">Padding (in space)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/css/overflow.html">Overflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/css/elements_positions.html">Elements position (<code class="docutils literal notranslate"><span class="pre">display</span></code>)</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/forms.html">Forms</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Linux</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../linux/intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/manage_input_output.html">Manage input/output</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../linux/filesystem.html">Filesystem</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../linux/filesystem/files_directories.html">Files and directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/filesystem/archiving.html">Archiving</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/system_information.html">System information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/backup.html">Backup</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../linux/network.html">Network</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../linux/network/curl.html">Curl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/network/ssh.html">SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/network/netcat_nc.html">Netcat (<code class="docutils literal notranslate"><span class="pre">nc</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux/network/vpn.html">VPN</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../linux/users_groups.html">Users &amp; groups</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../linux/users_groups/users_manipulations.html">Users manipulations</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/package_management.html">Package management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/path.html">Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/cron.html">Cron</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/gnupg.html">GnuPG</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="python_apache.html">Python with apache</a></li>







<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="redis.html">Redis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="redis/zset.html">Zset</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">Nginx</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="nginx/reverse_proxy.html">Reverse proxy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="nginx/reverse_proxy/proxy_pass.html">Proxy pass</a></li>
<li class="toctree-l3"><a class="reference internal" href="nginx/reverse_proxy/cache.html">Cache</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="nginx/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="nginx/server.html">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="nginx/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="nginx/logs.html">Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="nginx/connections_management.html">Connections management</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="gitlab.html">Gitlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansible.html">Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="java_script.html">Java script</a></li>
<li class="toctree-l1"><a class="reference internal" href="go_templates.html">Go templates</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/fedorkobak/knowledge" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/other/nginx.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Nginx</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables">Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location">Location</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#server">Server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reverse-proxy">Reverse proxy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logs">Logs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-management">Connections management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-nginx">Build nginx</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="nginx">
<h1>Nginx<a class="headerlink" href="#nginx" title="Link to this heading">#</a></h1>
<p>Nginx is a versatile tool that can be utilized as a web server, reverse proxy, load balancer, and much more. This page provides an overview of the fundamentals of working with Nginx.</p>
<p><strong>Sources:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.freecodecamp.org/news/the-nginx-handbook/">Nginx handbook</a>.</p></li>
<li><p><a class="reference external" href="https://nginx.org/en/docs/varindex.html">Default variables available in NGINX</a>.</p></li>
</ul>
<p>For examples, we will run nginx in a docker container - the following cell runs nginx in a docker container.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-itd<span class="w"> </span>--name<span class="w"> </span>experiment_nginx<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">80</span>:80<span class="w"> </span>nginx
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0f36c0c1aa1fa9936f5b0bd323c4a53a99e1f6254f5e4779af68a80e38f0e624
</pre></div>
</div>
</div>
</div>
<p>Now we can check if nginx is up by requesting it’s main page.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF | displayHTML</span>
<span class="s">&lt;iframe </span>
<span class="s">    srcdoc=&#39;$(curl -s localhost:80)&#39; </span>
<span class="s">    width=&#39;100%&#39; </span>
<span class="s">    height=&#39;600px&#39; </span>
<span class="s">    style=&#39;border:none;&#39;</span>
<span class="s">&gt;</span>
<span class="s">&lt;/iframe&gt;</span>
<span class="s">EOF</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><iframe 
    srcdoc='<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>' 
    width='100%' 
    height='600px' 
    style='border:none;'
>
</iframe>
</div></div>
</div>
<p><strong>Note</strong> don’t forget to stop container after all.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>stop<span class="w"> </span>experiment_nginx
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>experiment_nginx
</pre></div>
</div>
</div>
</div>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h2>
<p>Nginx is mainly controlled by its configuration files, so it’s important to understand where they are. They are usually located in the <code class="docutils literal notranslate"><span class="pre">/etc/nginx/</span></code> folder. Find out more in <a class="reference internal" href="nginx/configuration.html"><span class="std std-doc">specific page</span></a>.</p>
<hr class="docutils" />
<p>The following cell shows the contents of the <code class="docutils literal notranslate"><span class="pre">/etc/nginx</span></code> command.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/etc/nginx/
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>total 32
drwxr-xr-x 1 root root 4096 Sep  4 08:52 conf.d
-rw-r--r-- 1 root root 1007 May 28 13:22 fastcgi_params
-rw-r--r-- 1 root root 5349 May 28 13:22 mime.types
lrwxrwxrwx 1 root root   22 May 29 16:45 modules -&gt; /usr/lib/nginx/modules
-rw-r--r-- 1 root root  648 May 29 16:45 nginx.conf
-rw-r--r-- 1 root root  636 May 28 13:22 scgi_params
-rw-r--r-- 1 root root  664 May 28 13:22 uwsgi_params
</pre></div>
</div>
</div>
</div>
<p>The most important file here is <code class="docutils literal notranslate"><span class="pre">nginx.conf</span></code> - it’s the central nginx configuration file. It’s printed in the next cell:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>cat<span class="w"> </span>/etc/nginx/nginx.conf
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log notice;
pid        /var/run/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;
                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;
                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    include /etc/nginx/conf.d/*.conf;
}
</pre></div>
</div>
</div>
</div>
<p>Changing this file will change the behavior of nginx. So in the next cell we do that. With <code class="docutils literal notranslate"><span class="pre">nginx</span> <span class="pre">-s</span> <span class="pre">reload</span></code> we reload nginx - this will apply the changes to nginx. The following cell defines the most minimal configuration I’ve found so far - just returning 200 “hello” from the server.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt;  /etc/nginx/nginx.conf&#39;</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">events {}</span>
<span class="s">http {server{return 200 &quot;hello&quot;;}}</span>
<span class="s">EOF</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024/12/04 16:13:55 [notice] 311#311: signal process started
</pre></div>
</div>
</div>
</div>
<p>Here is showen how default behaviour of the nginx changed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>localhost:80
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>hello
</pre></div>
</div>
</div>
</div>
<p>We just got message specified in the <code class="docutils literal notranslate"><span class="pre">nginx.conf</span></code>.</p>
</section>
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Link to this heading">#</a></h2>
<p>Nginx uses variables, which are denoted by the <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol before the variable name. There is a <a class="reference external" href="https://nginx.org/en/docs/varindex.html">set of predefined variables</a> in Nginx that you can use. Find out more in the <a class="reference internal" href="nginx/variables.html"><span class="std std-doc">specific page</span></a>.</p>
<hr class="docutils" />
<p>The following cell shows how you can display the value of an arbitrary Nginx variable; in this case, it is <code class="docutils literal notranslate"><span class="pre">$localtime</span></code>.</p>
<p><strong>Note:</strong> The backward slash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) is used here to escape the <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol from bash, which also uses <code class="docutils literal notranslate"><span class="pre">$</span></code> to identify variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt;  /etc/nginx/nginx.conf&#39;</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">events {}</span>

<span class="s">http {</span>
<span class="s">    server {</span>
<span class="s">        listen 80;</span>
<span class="s">        return 200 \$time_local;</span>
<span class="s">    }</span>
<span class="s">}</span>

<span class="s">EOF</span>

docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024/09/04 09:21:38 [notice] 381#381: signal process started
</pre></div>
</div>
</div>
</div>
<p>Let’s request gotten endpoint.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>http://localhost:80
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>04/Sep/2024:09:28:54 +0000
</pre></div>
</div>
</div>
</div>
<p>We get something that looks like a datetime.</p>
</section>
<section id="location">
<h2>Location<a class="headerlink" href="#location" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">location</span></code> directive allows setting configurations based on the request URI. Check <a class="reference external" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location">corresponding section</a> on the official site.</p>
<hr class="docutils" />
<p>In the following example, nginx config defines two locations:  <code class="docutils literal notranslate"><span class="pre">/pattern</span></code> and <code class="docutils literal notranslate"><span class="pre">/pattern/</span></code> URIs. By looking at the output, you can see exactly which location was triggered. They’re almost the same, but you’ll see that they match the different cases.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt;  /etc/nginx/nginx.conf&#39;</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">events {}</span>
<span class="s">http {</span>
<span class="s">    server {</span>
<span class="s">        listen 80;</span>
<span class="s">        </span>
<span class="s">        location /pattern {</span>
<span class="s">            return 200 &quot;location 1 - I use /pattern&quot;;</span>
<span class="s">        }</span>

<span class="s">        location /pattern/ {</span>
<span class="s">            return 200 &quot;location 2 - I use /pattern/&quot;;</span>
<span class="s">        }</span>
<span class="s">    }</span>
<span class="s">}</span>
<span class="s">EOF</span>

docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>experiment_nginx<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024/12/04 16:05:03 [notice] 106#106: signal process started
</pre></div>
</div>
</div>
</div>
<p>Now we can request different URIs from nginx and see what exactly has been triggered.</p>
<p>The following example shows what happens when you access <code class="docutils literal notranslate"><span class="pre">/pattern</span></code> (no <code class="docutils literal notranslate"><span class="pre">/</span></code> at the end of the command).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-L<span class="w"> </span>http://localhost:80/pattern
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>location 1 - I use /pattern
</pre></div>
</div>
</div>
</div>
<p>The next cell shows what happens when you access <code class="docutils literal notranslate"><span class="pre">/pattern/wow</span></code> (we use an additional path segment).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-L<span class="w"> </span>http://localhost:80/pattern/wow
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>location 2 - I use /pattern/
</pre></div>
</div>
</div>
</div>
</section>
<section id="server">
<h2>Server<a class="headerlink" href="#server" title="Link to this heading">#</a></h2>
<p>With the <code class="docutils literal notranslate"><span class="pre">server</span></code> directive, you can create so-called “virtual servers” under which you can place locations with the same configuration.</p>
<p>There is a strong relationship to the <code class="docutils literal notranslate"><span class="pre">server_name</span></code> directive that allows nginx to understand which request should be handled by which virtual server.</p>
<p>Find out more in:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://nginx.org/en/docs/http/server_names.html">Server names</a> official nginx tutorial.</p></li>
<li><p><a class="reference external" href="https://nginx.org/en/docs/http/request_processing.html">How nginx processes a request</a> page in official nginx site.</p></li>
<li><p><a class="reference internal" href="nginx/server.html"><span class="std std-doc">Particular page</span></a> on conviguring virtual servers in nginx.</p></li>
</ul>
<hr class="docutils" />
<p>The following cell shows the basic usage - there are two servers. It’s possible to tell which server handled the request <code class="docutils literal notranslate"><span class="pre">Server</span></code> header of the http response. You can specify which one you want to work with by specifying the <code class="docutils literal notranslate"><span class="pre">Host</span></code> header in the request.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt;  /etc/nginx/nginx.conf&#39;</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">events {}</span>
<span class="s">http {</span>
<span class="s">    server {</span>
<span class="s">        server_name serv1;</span>
<span class="s">        location /loc1 {return 200 &quot;Hello1&quot;;}</span>
<span class="s">        location /loc2 {return 200 &quot;Hello2&quot;;}</span>
<span class="s">        add_header Server One;</span>
<span class="s">    }</span>

<span class="s">    server {</span>
<span class="s">        server_name serv2;</span>
<span class="s">        location /loc1 {return 200 &quot;Hello1&quot;;}</span>
<span class="s">        location /loc2 {return 200 &quot;Hello2&quot;;}</span>
<span class="s">        add_header Server Two;</span>
<span class="s">    }</span>
<span class="s">}</span>
<span class="s">EOF</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024/12/26 10:14:25 [notice] 110#110: signal process started
</pre></div>
</div>
</div>
</div>
<p>The following cell shows requests with an unspecified <code class="docutils literal notranslate"><span class="pre">Host</span></code> header - by default it will go to the server higher in the config.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-I<span class="w"> </span>localhost/loc1
curl<span class="w"> </span>-I<span class="w"> </span>localhost/loc2
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 200 OK
<span class=" -Color -Color-Bold">Server</span>: nginx/1.27.3
<span class=" -Color -Color-Bold">Date</span>: Thu, 26 Dec 2024 10:14:29 GMT
<span class=" -Color -Color-Bold">Content-Type</span>: text/plain
<span class=" -Color -Color-Bold">Content-Length</span>: 6
<span class=" -Color -Color-Bold">Connection</span>: keep-alive
<span class=" -Color -Color-Bold">Server</span>: One

HTTP/1.1 200 OK
<span class=" -Color -Color-Bold">Server</span>: nginx/1.27.3
<span class=" -Color -Color-Bold">Date</span>: Thu, 26 Dec 2024 10:14:29 GMT
<span class=" -Color -Color-Bold">Content-Type</span>: text/plain
<span class=" -Color -Color-Bold">Content-Length</span>: 6
<span class=" -Color -Color-Bold">Connection</span>: keep-alive
<span class=" -Color -Color-Bold">Server</span>: One
</pre></div>
</div>
</div>
</div>
<p>As a result, there is a <code class="docutils literal notranslate"><span class="pre">One</span></code> value under the <code class="docutils literal notranslate"><span class="pre">Server</span></code> key of the responses.</p>
<p>The same experiment but with <code class="docutils literal notranslate"><span class="pre">Host:</span> <span class="pre">serv2</span></code> which is corresponds to the value <code class="docutils literal notranslate"><span class="pre">server_name</span> <span class="pre">serv2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-I<span class="w"> </span>localhost/loc1<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: serv2&quot;</span>
curl<span class="w"> </span>-I<span class="w"> </span>localhost/loc2<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: serv2&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 200 OK
<span class=" -Color -Color-Bold">Server</span>: nginx/1.27.3
<span class=" -Color -Color-Bold">Date</span>: Thu, 26 Dec 2024 11:30:26 GMT
<span class=" -Color -Color-Bold">Content-Type</span>: text/plain
<span class=" -Color -Color-Bold">Content-Length</span>: 6
<span class=" -Color -Color-Bold">Connection</span>: keep-alive
<span class=" -Color -Color-Bold">Server</span>: Two

HTTP/1.1 200 OK
<span class=" -Color -Color-Bold">Server</span>: nginx/1.27.3
<span class=" -Color -Color-Bold">Date</span>: Thu, 26 Dec 2024 11:30:26 GMT
<span class=" -Color -Color-Bold">Content-Type</span>: text/plain
<span class=" -Color -Color-Bold">Content-Length</span>: 6
<span class=" -Color -Color-Bold">Connection</span>: keep-alive
<span class=" -Color -Color-Bold">Server</span>: Two
</pre></div>
</div>
</div>
</div>
<p>As a result, the headers are the same as specified as the second virtual server.</p>
</section>
<section id="reverse-proxy">
<h2>Reverse proxy<a class="headerlink" href="#reverse-proxy" title="Link to this heading">#</a></h2>
<p>Another way to use nginx is as a reverse proxy, so you can redirect requests. You can define it with the <code class="docutils literal notranslate"><span class="pre">proxy_pass</span></code> directive in the <code class="docutils literal notranslate"><span class="pre">server</span></code> context.</p>
<p>Findout more in <a class="reference internal" href="#nginx/location.ipynb"><span class="xref myst">specific page</span></a>.</p>
<hr class="docutils" />
<p>The following config file makes requests to nginx to redirect to <code class="docutils literal notranslate"><span class="pre">google.com</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt;  /etc/nginx/nginx.conf&#39;</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">events {}</span>

<span class="s">http {</span>
<span class="s">    server {</span>
<span class="s">        listen 80;</span>
<span class="s">        location / {proxy_pass &quot;https://google.com/&quot;;}</span>
<span class="s">    }</span>
<span class="s">}</span>
<span class="s">EOF</span>

docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024/09/04 08:55:31 [notice] 146#146: signal process started
</pre></div>
</div>
</div>
</div>
<p>Now, when we access <code class="docutils literal notranslate"><span class="pre">localhost:80</span></code>, we get a message that we’ve been redirected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-s<span class="w"> </span>localhost:80<span class="w"> </span><span class="p">|</span><span class="w"> </span>displayHTML
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="https://www.google.com/">here</A>.
</BODY></HTML>
</div></div>
</div>
<p>By adding the <code class="docutils literal notranslate"><span class="pre">-L</span></code> option to the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command, we can follow redirects, allowing us to retrieve Google’s main page.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-sL<span class="w"> </span>localhost:80<span class="w"> </span><span class="p">|</span><span class="w"> </span>displayHTML
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><!doctype html><html itemscope="" itemtype="http://schema.org/WebPage" lang="be"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><meta content="/images/branding/googleg/1x/googleg_standard_color_128dp.png" itemprop="image"><title>Google</title><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var _g={kEI:'iSDYZr7QJ_GihbIP4u2KyAc',kEXPI:'0,3700290,659,432,51,538613,2872,2891,8348,34680,249749,6700,41948,57734,2,2,1,10956,13670,2006,8155,23350,22436,9779,5864,56794,44507,31701,15816,1804,47082,1632,9710,19569,5239758,997,147,5991287,936,30821199,1008,15665,43886,3,318,4,1281,3,2124363,23029351,4117,8682,24511,2,75968,19268,3355,15164,8181,154,49276,21673,2479,4272,155,2484,13414,89,7736,9140,4599,328,3217,4,1238,1766,1116,6470,5,6374,5708,410,518,5720,1669,5634,687,6676,1119,3,3015,2695,4475,1643,3968,5486,774,682,664,6181,5334,2188,2212,2,9,3089,1195,4283,4844,2378,564,920,979,307,221,1705,4840,1,6,2294,305,840,4,2205,239,1370,4192,615,5341,1050,752,45,2388,157,94,3145,2893,2,2082,565,709,59,556,11,3479,211,9,510,11850,660,809,959,2,820,3,2699,646,336,558,184,599,3,560,1472,1047,2649,505,454,329,26,621,503,1,872,10,3,2,85,27,425,484,113,1182,77,143,1447,78,125,21,1130,702,42,979,3,193,326,669,1460,4,3,1063,329,59,41,1081,5,11,52,4,1381,6,210,2269,141,313,70,52,57,335,148,504,248,200,1429,1362,2004,882,220,209,46,383,219,1,584,509,48,2,424,145,20,313,96,186,91,641,542,1,8,1,1,4,1,4,65,175,9,140,502,273,463,234,513,772,1010,1145,3058,4,1,6,21474764,3,1423,3,14475,3,7053,275,837,47,8781,21,1327',kBL:'yGjC',kOPI:89978449};(function(){var a;((a=window.google)==null?0:a.stvsc)?google.kEI=_g.kEI:window.google=_g;}).call(this);})();(function(){google.sn='webhp';google.kHL='be';})();(function(){
var h=this||self;function l(){return window.google!==void 0&&window.google.kOPI!==void 0&&window.google.kOPI!==0?window.google.kOPI:null};var m,n=[];function p(a){for(var b;a&&(!a.getAttribute||!(b=a.getAttribute("eid")));)a=a.parentNode;return b||m}function q(a){for(var b=null;a&&(!a.getAttribute||!(b=a.getAttribute("leid")));)a=a.parentNode;return b}function r(a){/^http:/i.test(a)&&window.location.protocol==="https:"&&(google.ml&&google.ml(Error("a"),!1,{src:a,glmm:1}),a="");return a}
function t(a,b,c,d,k){var e="";b.search("&ei=")===-1&&(e="&ei="+p(d),b.search("&lei=")===-1&&(d=q(d))&&(e+="&lei="+d));d="";var g=b.search("&cshid=")===-1&&a!=="slh",f=[];f.push(["zx",Date.now().toString()]);h._cshid&&g&&f.push(["cshid",h._cshid]);c=c();c!=null&&f.push(["opi",c.toString()]);for(c=0;c<f.length;c++){if(c===0||c>0)d+="&";d+=f[c][0]+"="+f[c][1]}return"/"+(k||"gen_204")+"?atyp=i&ct="+String(a)+"&cad="+(b+e+d)};m=google.kEI;google.getEI=p;google.getLEI=q;google.ml=function(){return null};google.log=function(a,b,c,d,k,e){e=e===void 0?l:e;c||(c=t(a,b,e,d,k));if(c=r(c)){a=new Image;var g=n.length;n[g]=a;a.onerror=a.onload=a.onabort=function(){delete n[g]};a.src=c}};google.logUrl=function(a,b){b=b===void 0?l:b;return t("",a,b)};}).call(this);(function(){google.y={};google.sy=[];var d;(d=google).x||(d.x=function(a,b){if(a)var c=a.id;else{do c=Math.random();while(google.y[c])}google.y[c]=[a,b];return!1});var e;(e=google).sx||(e.sx=function(a){google.sy.push(a)});google.lm=[];var f;(f=google).plm||(f.plm=function(a){google.lm.push.apply(google.lm,a)});google.lq=[];var g;(g=google).load||(g.load=function(a,b,c){google.lq.push([[a],b,c])});var h;(h=google).loadAll||(h.loadAll=function(a,b){google.lq.push([a,b])});google.bx=!1;var k;(k=google).lx||(k.lx=function(){});var l=[],m;(m=google).fce||(m.fce=function(a,b,c,n){l.push([a,b,c,n])});google.qce=l;}).call(this);google.f={};(function(){
document.documentElement.addEventListener("submit",function(b){var a;if(a=b.target){var c=a.getAttribute("data-submitfalse");a=c==="1"||c==="q"&&!a.elements.q.value?!0:!1}else a=!1;a&&(b.preventDefault(),b.stopPropagation())},!0);document.documentElement.addEventListener("click",function(b){var a;a:{for(a=b.target;a&&a!==document.documentElement;a=a.parentElement)if(a.tagName==="A"){a=a.getAttribute("data-nohref")==="1";break a}a=!1}a&&b.preventDefault()},!0);}).call(this);</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}
</style><style>body,td,a,p,.h{font-family:arial,sans-serif}body{margin:0;overflow-y:scroll}#gog{padding:3px 8px 0}td{line-height:.8em}.gac_m td{line-height:17px}form{margin-bottom:20px}.h{color:#1967d2}em{font-weight:bold;font-style:normal}.lst{height:25px;width:496px}.gsfi,.lst{font:18px arial,sans-serif}.gsfs{font:17px arial,sans-serif}.ds{display:inline-box;display:inline-block;margin:3px 0 4px;margin-left:4px}input{font-family:inherit}body{background:#fff;color:#000}a{color:#681da8;text-decoration:none}a:hover,a:active{text-decoration:underline}.fl a{color:#1967d2}a:visited{color:#681da8}.sblc{padding-top:5px}.sblc a{display:block;margin:2px 0;margin-left:13px;font-size:11px}.lsbb{background:#f8f9fa;border:solid 1px;border-color:#dadce0 #70757a #70757a #dadce0;height:30px}.lsbb{display:block}#WqQANb a{display:inline-block;margin:0 12px}.lsb{background:url(/images/nav_logo229.png) 0 -261px repeat-x;color:#000;border:none;cursor:pointer;height:30px;margin:0;outline:0;font:15px arial,sans-serif;vertical-align:top}.lsb:active{background:#dadce0}.lst:focus{outline:none}.Ucigb{width:458px}</style><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){window.google.erd={jsr:1,bv:2071,de:true};
var g=this||self;var k,l=(k=g.mei)!=null?k:1,n,p=(n=g.sdo)!=null?n:!0,q=0,r,t=google.erd,v=t.jsr;google.ml=function(a,b,d,m,e){e=e===void 0?2:e;b&&(r=a&&a.message);d===void 0&&(d={});d.cad="ple_"+google.ple+".aple_"+google.aple;if(google.dl)return google.dl(a,e,d,!0),null;b=d;if(v<0){window.console&&console.error(a,b);if(v===-2)throw a;b=!1}else b=!a||!a.message||a.message==="Error loading script"||q>=l&&!m?!1:!0;if(!b)return null;q++;d=d||{};b=encodeURIComponent;var c="/gen_204?atyp=i&ei="+b(google.kEI);google.kEXPI&&(c+="&jexpid="+b(google.kEXPI));c+="&srcpg="+b(google.sn)+"&jsr="+b(t.jsr)+
"&bver="+b(t.bv);t.dpf&&(c+="&dpf="+b(t.dpf));var f=a.lineNumber;f!==void 0&&(c+="&line="+f);var h=a.fileName;h&&(h.indexOf("-extension:/")>0&&(e=3),c+="&script="+b(h),f&&h===window.location.href&&(f=document.documentElement.outerHTML.split("\n")[f],c+="&cad="+b(f?f.substring(0,300):"No script found.")));google.ple&&google.ple===1&&(e=2);c+="&jsel="+e;for(var u in d)c+="&",c+=b(u),c+="=",c+=b(d[u]);c=c+"&emsg="+b(a.name+": "+a.message);c=c+"&jsst="+b(a.stack||"N/A");c.length>=12288&&(c=c.substr(0,12288));a=c;m||google.log(0,"",a);return a};window.onerror=function(a,b,d,m,e){r!==a&&(a=e instanceof Error?e:Error(a),d===void 0||"lineNumber"in a||(a.lineNumber=d),b===void 0||"fileName"in a||(a.fileName=b),google.ml(a,!1,void 0,!1,a.name==="SyntaxError"||a.message.substring(0,11)==="SyntaxError"||a.message.indexOf("Script error")!==-1?3:0));r=null;p&&q>=l&&(window.onerror=null)};})();</script></head><body bgcolor="#fff"><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var src='/images/nav_logo229.png';var iesg=false;document.body.onload = function(){window.n && window.n();if (document.images){new Image().src=src;}
if (!iesg){document.f&&document.f.q.focus();document.gbqf&&document.gbqf.q.focus();}
}
})();</script><div id="mngb"><div id=gbar><nobr><b class=gb1>&#1055;&#1086;&#1096;&#1091;&#1082;</b> <a class=gb1 href="https://www.google.com/imghp?hl=be&tab=wi">&#1042;&#1110;&#1076;&#1072;&#1088;&#1099;&#1089;&#1099;</a> <a class=gb1 href="https://maps.google.by/maps?hl=be&tab=wl">&#1050;&#1072;&#1088;&#1090;&#1099;</a> <a class=gb1 href="https://play.google.com/?hl=be&tab=w8">Play</a> <a class=gb1 href="https://www.youtube.com/?tab=w1">YouTube</a> <a class=gb1 href="https://news.google.com/?tab=wn">&#1053;&#1072;&#1074;&#1110;&#1085;&#1099;</a> <a class=gb1 href="https://mail.google.com/mail/?tab=wm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=wo">&#1044;&#1099;&#1089;&#1082;</a> <a class=gb1 style="text-decoration:none" href="https://www.google.by/intl/be/about/products?tab=wh"><u>&#1071;&#1096;&#1095;&#1101;</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a href="http://www.google.by/history/optout?hl=be" class=gb4>&#1043;&#1110;&#1089;&#1090;&#1086;&#1088;&#1099;&#1103; &#1087;&#1086;&#1096;&#1091;&#1082;&#1091;</a> | <a  href="/preferences?hl=be" class=gb4>&#1053;&#1072;&#1083;&#1072;&#1076;&#1099;</a> | <a target=_top id=gb_70 href="https://accounts.google.com/ServiceLogin?hl=be&passive=true&continue=https://www.google.com/&ec=GAZAAQ" class=gb4>&#1059;&#1074;&#1072;&#1081;&#1089;&#1094;&#1110;</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div></div><center><br clear="all" id="lgpd"><div id="XjhHGf"><img alt="Google" height="92" src="/images/branding/googlelogo/1x/googlelogo_white_background_color_272x92dp.png" style="padding:28px 0 14px" width="272" id="hplogo"><br><br></div><form action="/search" name="f"><table cellpadding="0" cellspacing="0"><tr valign="top"><td width="25%">&nbsp;</td><td align="center" nowrap=""><input name="ie" value="ISO-8859-1" type="hidden"><input value="be" name="hl" type="hidden"><input name="source" type="hidden" value="hp"><input name="biw" type="hidden"><input name="bih" type="hidden"><div class="ds" style="height:32px;margin:4px 0"><div style="position:relative;zoom:1"><input class="lst Ucigb" style="margin:0;padding:5px 8px 0 6px;vertical-align:top;color:#000;padding-right:38px" value="" title="&#1055;&#1086;&#1096;&#1091;&#1082; Google" maxlength="2048" name="q" size="57"><img src="/textinputassistant/tia.png" style="position:absolute;cursor:pointer;right:5px;top:4px;z-index:300" data-script-url="/textinputassistant/13/be_tia.js" id="tsuid_1" alt="" height="23" width="27"><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var id='tsuid_1';document.getElementById(id).onclick = function(){var s = document.createElement('script');s.src = this.getAttribute('data-script-url');document.body.appendChild(s);};})();</script></div></div><br style="line-height:0"><span class="ds"><span class="lsbb"><input class="lsb" value="&#1055;&#1086;&#1096;&#1091;&#1082; Google" name="btnG" type="submit"></span></span><span class="ds"><span class="lsbb"><input class="lsb" id="tsuid_2" value="&#1052;&#1085;&#1077; &#1087;&#1072;&#1096;&#1072;&#1085;&#1094;&#1091;&#1077;" name="btnI" type="submit"><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var id='tsuid_2';document.getElementById(id).onclick = function(){if (this.form.q.value){this.checked = 1;if (this.form.iflsig)this.form.iflsig.disabled = false;}
else top.location='/doodles/';};})();</script><input value="AL9hbdgAAAAAZtgumRxuhzMggDxAVYWocEBMfIczG4BZ" name="iflsig" type="hidden"></span></span></td><td class="fl sblc" align="left" nowrap="" width="25%"><a href="/advanced_search?hl=be&amp;authuser=0">&#1055;&#1072;&#1096;&#1099;&#1088;&#1072;&#1085;&#1099; &#1087;&#1086;&#1096;&#1091;&#1082;</a></td></tr></table><input id="gbv" name="gbv" type="hidden" value="1"><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var a,b="1";if(document&&document.getElementById)if(typeof XMLHttpRequest!="undefined")b="2";else if(typeof ActiveXObject!="undefined"){var c,d,e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(c=0;d=e[c++];)try{new ActiveXObject(d),b="2"}catch(h){}}a=b;if(a=="2"&&location.search.indexOf("&gbv=2")==-1){var f=google.gbvu,g=document.getElementById("gbv");g&&(g.value=a);f&&window.setTimeout(function(){location.href=f},0)};}).call(this);</script></form><div style="font-size:83%;min-height:3.5em"><br><div id="gws-output-pages-elements-homepage_additional_languages__als"><style>#gws-output-pages-elements-homepage_additional_languages__als{font-size:small;margin-bottom:24px}#SIvCob{color:#474747;display:inline-block;line-height:28px;}#SIvCob a{padding:0 3px;}.H6sW5{display:inline-block;margin:0 2px;white-space:nowrap}.z4hgWe{display:inline-block;margin:0 2px}</style><div id="SIvCob">&#1044;&#1072;&#1089;&#1090;&#1091;&#1087;&#1085;&#1072;&#1103; &#1084;&#1086;&#1074;&#1072;:  <a href="https://www.google.com/setprefs?sig=0_AgpL4V0kVwAQ_9Efbr8O5WuDDsM%3D&amp;hl=ru&amp;source=homepage&amp;sa=X&amp;ved=0ahUKEwj-uPGz9aiIAxVxUUEAHeK2AnkQ2ZgBCAY">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a>  </div></div></div><span id="footer"><div style="font-size:10pt"><div style="margin:19px auto;text-align:center" id="WqQANb"><a href="/intl/be/ads/">&#1056;&#1101;&#1082;&#1083;&#1072;&#1084;&#1072;</a><a href="/intl/be/about.html">&#1059;&#1089;&#1105; &#1087;&#1088;&#1072; Google</a><a href="https://www.google.com/setprefdomain?prefdom=BY&amp;prev=https://www.google.by/&amp;sig=K_sj4rHy9QkHY-XOkZqSEQNpwoDaM%3D">Google.by</a></div></div><p style="font-size:8pt;color:#70757a">&copy; 2024</p></span></center><script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){window.google.cdo={height:757,width:1440};(function(){var a=window.innerWidth,b=window.innerHeight;if(!a||!b){var c=window.document,d=c.compatMode=="CSS1Compat"?c.documentElement:c.body;a=d.clientWidth;b=d.clientHeight}
if(a&&b&&(a!=google.cdo.width||b!=google.cdo.height)){var e=google,f=e.log,g="/client_204?&atyp=i&biw="+a+"&bih="+b+"&ei="+google.kEI,h="",k=[],l=window.google!==void 0&&window.google.kOPI!==void 0&&window.google.kOPI!==0?window.google.kOPI:null;l!=null&&k.push(["opi",l.toString()]);for(var m=0;m<k.length;m++){if(m===0||m>0)h+="&";h+=k[m][0]+"="+k[m][1]}f.call(e,"","",g+h)};}).call(this);})();</script>  <script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){google.xjs={basecomb:'/xjs/_/js/k\x3dxjs.hp.en.2RRmhRyqEcM.O/ck\x3dxjs.hp.vZsmrEGoitM.L.X.O/am\x3dAQAAACAAAAAAAAAAAAAAAAAAAAAAAAAAgBAAAAAAAABAABgAwAEAACAAQEAAAAAAAB4AAAAAAAAQgBAAgAKAAAHAgfiOAEAALAIAwAs/d\x3d1/ed\x3d1/dg\x3d0/ujg\x3d1/rs\x3dACT90oF1ukRlhF_vcouA6O7q8SmwqSXwWg',basecss:'/xjs/_/ss/k\x3dxjs.hp.vZsmrEGoitM.L.X.O/am\x3dAQAAACAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAABAAAAAAAAAACAAQEAAAAAAAAAAAAAAAAAQgBAAgAKAAAE/rs\x3dACT90oEh2qYx0ggVNZxUb-7AkJiU8ZF1oA',basejs:'/xjs/_/js/k\x3dxjs.hp.en.2RRmhRyqEcM.O/am\x3dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAABgAwAEAAAAAAAAAAAAAAB4AAAAAAAAAAAAAAAAAAADAgfiOAEAALAIAwAs/dg\x3d0/rs\x3dACT90oGYfbxDfG1QrGq9VI2mIcfaY2ImQQ',excm:[]};})();</script>  <link href="/xjs/_/ss/k=xjs.hp.vZsmrEGoitM.L.X.O/am=AQAAACAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAABAAAAAAAAAACAAQEAAAAAAAAAAAAAAAAAQgBAAgAKAAAE/d=1/ed=1/rs=ACT90oEh2qYx0ggVNZxUb-7AkJiU8ZF1oA/m=d" rel="stylesheet" nonce="OweyEjq5S-5PXivNRbv8_g">      <script nonce="OweyEjq5S-5PXivNRbv8_g">(function(){var u='/xjs/_/js/k\x3dxjs.hp.en.2RRmhRyqEcM.O/am\x3dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAABgAwAEAAAAAAAAAAAAAAB4AAAAAAAAAAAAAAAAAAADAgfiOAEAALAIAwAs/d\x3d1/ed\x3d1/dg\x3d3/rs\x3dACT90oGYfbxDfG1QrGq9VI2mIcfaY2ImQQ/m\x3dd';var st=1;var amd=1000;var mmd=0;var pod=true;
var f=this||self,g=function(a){return a};function h(){var a,b,c;return(a=(b=window.google)==null?void 0:(c=b.ia)==null?void 0:c.r.B2Jtyd)&&a.m===1&&a.cbfd!=null&&a.cbvi!=null?a:void 0};var k;var l={},m=function(a){this.g=a};m.prototype.toString=function(){return this.g+""};var n=function(a){return a instanceof m&&a.constructor===m?a.g:"type_error:TrustedResourceUrl"};
var p=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;var q="alternate author bookmark canonical cite help icon license modulepreload next prefetch dns-prefetch prerender preconnect preload prev search subresource".split(" ");function r(a,b){a.src=n(b);var c,d;(c=(b=(d=(c=(a.ownerDocument&&a.ownerDocument.defaultView||window).document).querySelector)==null?void 0:d.call(c,"script[nonce]"))?b.nonce||b.getAttribute("nonce")||"":"")&&a.setAttribute("nonce",c)};var t=function(a){var b=document;a=String(a);b.contentType==="application/xhtml+xml"&&(a=a.toLowerCase());return b.createElement(a)};function w(a){a=a===null?"null":a===void 0?"undefined":a;if(k===void 0){var b=null;var c=f.trustedTypes;if(c&&c.createPolicy){try{b=c.createPolicy("goog#html",{createHTML:g,createScript:g,createScriptURL:g})}catch(d){f.console&&f.console.error(d.message)}k=b}else k=b}a=(b=k)?b.createScriptURL(a):a;return new m(a,l)};google.ps===void 0&&(google.ps=[]);function x(){var a=u,b=function(){};google.lx=google.stvsc?b:function(){y(a);google.lx=b};google.bx||google.lx()}function z(a,b){b&&r(a,w(b));var c=a.onload;a.onload=function(d){c&&c(d);google.ps=google.ps.filter(function(e){return a!==e})};google.ps.push(a);document.body.appendChild(a)}google.as=z;function y(a){google.timers&&google.timers.load&&google.tick&&google.tick("load","xjsls");var b=t("SCRIPT");b.onerror=function(){google.ple=1};b.onload=function(){google.ple=0};google.xjsus=void 0;z(b,a);google.aple=-1;google.dp=!0}
function A(){var a=[u];if(!google.dp){for(var b=0;b<a.length;b++){var c=t("LINK"),d=c,e=w(a[b]);if(e instanceof m)d.href=n(e).toString(),d.rel="preload";else{if(q.indexOf("preload")===-1)throw Error("a`preload");e=p.test(e)?e:void 0;e!==void 0&&(d.href=e,d.rel="preload")}c.setAttribute("as","script");document.body.appendChild(c)}google.dp=!0}};function B(a){var b=a.getAttribute("jscontroller");return(b==="UBXHI"||b==="R3fhkb"||b==="TSZEqd")&&a.hasAttribute("data-src")}function C(){for(var a=document.getElementsByTagName("img"),b=0,c=a.length;b<c;b++){var d=a[b];if(d.hasAttribute("data-lzy_")&&Number(d.getAttribute("data-atf"))&1&&!B(d))return!0}return!1}for(var D=document.getElementsByTagName("img"),E=0,F=D.length;E<F;++E){var G=D[E];Number(G.getAttribute("data-atf"))&1&&B(G)&&(G.src=G.getAttribute("data-src"))};var H,I,J,K,L,M;function N(){google.xjsu=u;f._F_jsUrl=u;L=function(){x()};H=!1;I=(st===1||st===3)&&!!google.caft&&!C();J=h();K=(st===2||st===3)&&(!!google.rairicb||!!J)&&!C();M=pod}function O(){H||I||K||(L(),H=!0)}
setTimeout(function(){google&&google.tick&&google.timers&&google.timers.load&&google.tick("load","xjspls");N();if(I||K){if(I){var a=function(){I=!1;O()};google.caft(a);window.setTimeout(a,amd)}K&&(a=function(){K=!1;O()},J?J.cbvi.push(a):(0,google.rairicb)(a),window.setTimeout(a,mmd));M&&(H||A())}else L()},0);})();window._ = window._ || {};window._DumpException = _._DumpException = function(e){throw e;};window._s = window._s || {};_s._DumpException = _._DumpException;window._qs = window._qs || {};_qs._DumpException = _._DumpException;(function(){var t=[1,128,0,0,0,0,17367040,0,4526784,117702756,167772176,1052672,2363392,120,0,270340,10519168,570884100,67111151,35592,3008];window._F_toggles = window._xjs_toggles = t;})();window._F_installCss = window._F_installCss || function(css){};(function(){google.jl={bfl:0,dw:false,ine:false,ubm:false,uwp:true,vs:false};})();(function(){var pmc='{\x22d\x22:{}}';google.pmc=JSON.parse(pmc);})();(function(){var b=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};
var e=this||self;var g,h;a:{for(var k=["CLOSURE_FLAGS"],l=e,n=0;n<k.length;n++)if(l=l[k[n]],l==null){h=null;break a}h=l}var p=h&&h[610401301];g=p!=null?p:!1;var q,r=e.navigator;q=r?r.userAgentData||null:null;function t(a){return g?q?q.brands.some(function(c){return(c=c.brand)&&c.indexOf(a)!=-1}):!1:!1}function u(a){var c;a:{if(c=e.navigator)if(c=c.userAgent)break a;c=""}return c.indexOf(a)!=-1};function v(){return g?!!q&&q.brands.length>0:!1}function w(){return u("Safari")&&!(x()||(v()?0:u("Coast"))||(v()?0:u("Opera"))||(v()?0:u("Edge"))||(v()?t("Microsoft Edge"):u("Edg/"))||(v()?t("Opera"):u("OPR"))||u("Firefox")||u("FxiOS")||u("Silk")||u("Android"))}function x(){return v()?t("Chromium"):(u("Chrome")||u("CriOS"))&&!(v()?0:u("Edge"))||u("Silk")}function y(){return u("Android")&&!(x()||u("Firefox")||u("FxiOS")||(v()?0:u("Opera"))||u("Silk"))};var z=v()?!1:u("Trident")||u("MSIE");y();x();w();var A=!z&&!w(),D=function(a){if(/-[a-z]/.test("ved"))return null;if(A&&a.dataset){if(y()&&!("ved"in a.dataset))return null;a=a.dataset.ved;return a===void 0?null:a}return a.getAttribute("data-"+"ved".replace(/([A-Z])/g,"-$1").toLowerCase())};var E=[],F=null;function G(a){a=a.target;var c=performance.now(),f=[],H=f.concat,d=E;if(!(d instanceof Array)){var m=typeof Symbol!="undefined"&&Symbol.iterator&&d[Symbol.iterator];if(m)d=m.call(d);else if(typeof d.length=="number")d={next:b(d)};else throw Error("b`"+String(d));for(var B=[];!(m=d.next()).done;)B.push(m.value);d=B}E=H.call(f,d,[c]);if(a&&a instanceof HTMLElement)if(a===F){if(c=E.length>=4)c=(E[E.length-1]-E[E.length-4])/1E3<5;if(c){c=google.getEI(a);a.hasAttribute("data-ved")?f=a?D(a)||"":"":f=(f=
a.closest("[data-ved]"))?D(f)||"":"";f=f||"";if(a.hasAttribute("jsname"))a=a.getAttribute("jsname");else{var C;a=(C=a.closest("[jsname]"))==null?void 0:C.getAttribute("jsname")}google.log("rcm","&ei="+c+"&tgtved="+f+"&jsname="+(a||""))}}else F=a,E=[c]}window.document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",G)});}).call(this);</script></body></html></div></div>
</div>
</section>
<section id="logs">
<h2>Logs<a class="headerlink" href="#logs" title="Link to this heading">#</a></h2>
<p>Logging in Nginx is very useful for troubleshooting. There are two main log files in Nginx:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/var/log/nginx/access.log</span></code>: Logs all incoming requests and their details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/var/log/nginx/error.log</span></code>: Logs cases that lead to errors.</p></li>
</ul>
<p>Find out more about logging setup in nginx:</p>
<ul class="simple">
<li><p><a class="reference internal" href="nginx/logs.html"><span class="std std-doc">Corresponding page</span></a> on this site.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_log</span></code> <a class="reference external" href="https://nginx.org/en/docs/ngx_core_module.html#error_log">direcitve description</a>.</p></li>
<li><p><a class="reference external" href="https://nginx.org/en/docs/http/ngx_http_log_module.html"><code class="docutils literal notranslate"><span class="pre">ngx_http_log_module</span></code></a> module that implements featuers associated with configuring logging in nginx.</p></li>
</ul>
<hr class="docutils" />
<p>For reasons that are still unclear, we need to reorder the log files in order to be able to read them. So in the following cell we do this for our container.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>experiment_nginx<span class="w"> </span>bash<span class="w"> </span><span class="s">&lt;&lt; EOF</span>

<span class="s">rm /var/log/nginx/access.log /var/log/nginx/error.log</span>
<span class="s">touch /var/log/nginx/access.log /var/log/nginx/error.log</span>
<span class="s">nginx -s reload</span>
<span class="s">EOF</span>
</pre></div>
</div>
</div>
</div>
<p>And here is a request to nginx to print the contents of <code class="docutils literal notranslate"><span class="pre">access.log</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>localhost:80<span class="w"> </span><span class="p">&amp;</span>&gt;<span class="w"> </span>/dev/null
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>experiment_nginx<span class="w"> </span>cat<span class="w"> </span>/var/log/nginx/access.log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>172.17.0.1 - - [22/Jul/2024:07:54:09 +0000] &quot;GET / HTTP/1.1&quot; 301 220 &quot;-&quot; &quot;curl/7.81.0&quot;
</pre></div>
</div>
</div>
</div>
</section>
<section id="connections-management">
<h2>Connections management<a class="headerlink" href="#connections-management" title="Link to this heading">#</a></h2>
<p>This section cosiders capabilities of the nginx to manage connections. Check the <a class="reference internal" href="nginx/connections_management.html"><span class="std std-doc">specific page</span></a> for this topic.</p>
</section>
<section id="build-nginx">
<h2>Build nginx<a class="headerlink" href="#build-nginx" title="Link to this heading">#</a></h2>
<p>To enable some features of the nginx you’ll need to build nginx from sources. For example, to include module for example <code class="docutils literal notranslate"><span class="pre">ngx_http_stub_status_module</span></code> you need to build nginx with special parameter <code class="docutils literal notranslate"><span class="pre">--with-http_stub_status_module</span></code> only after that operation you can use features of the included module.</p>
<p>Check <a class="reference external" href="https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/#compiling-and-installing-from-source">corresponding section</a> of the nginx installation page.</p>
<hr class="docutils" />
<p>The following cell represents dockerfile that can be used for building image of the custom nginx.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>nginx_files/build_nginx_docker
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>FROM debian:bookworm-slim

RUN apt update &amp;&amp; \
    apt install --no-install-recommends --no-install-suggests -y \
        gnupg1 \
        ca-certificates \
        curl \
        devscripts \
        equivs \
        git \
        libxml2-utils \
        lsb-release \
        xsltproc \
        libpcre3 \
        libpcre3-dev \
        zlib1g \
        zlib1g-dev

ARG NGINX_VERSION=&quot;1.27.3&quot;
ARG CONFIG_ARGUMENTS=&quot;--conf-path=/etc/nginx/nginx.conf --with-http_stub_status_module&quot;

RUN curl -f -L -O http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    tar -zxvf nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    cd nginx-${NGINX_VERSION} &amp;&amp; \
    ./configure ${CONFIG_ARGUMENTS} &amp;&amp; \
    make &amp;&amp; make install
    
ENV PATH=$PATH:/usr/local/nginx/sbin

CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]
</pre></div>
</div>
</div>
</div>
<p>There is such crucial features:</p>
<ul>
<li><p>Installing packages that are required for building nginx: <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">update</span> <span class="pre">...</span> <span class="pre">&amp;&amp;</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">...</span></code>.</p></li>
<li><p>Downloading nginx compiling and instiling it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-f<span class="w"> </span>-L<span class="w"> </span>-O<span class="w"> </span>http://nginx.org/download/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
tar<span class="w"> </span>-zxvf<span class="w"> </span>nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span><span class="w"> </span>nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
./configure<span class="w"> </span>--conf-path<span class="o">=</span>/etc/nginx/nginx.conf<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
make<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">./configure</span></code> command is particularly important as it allows you to specify additional arguments that affect the behavior of the resulting build. You can check the list of parameters and their meanings on the <a class="reference external" href="https://nginx.org/en/docs/configure.html">corresponding page</a>. For convenience, in a Dockerfile, there is a special argument <code class="docutils literal notranslate"><span class="pre">CONFIG_ARGUMENTS</span></code> where you can specify the set of arguments you want to use to build Nginx.</p></li>
</ul>
</li>
<li><p>Add the path of the installation to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable - so you can access nginx just by using the <code class="docutils literal notranslate"><span class="pre">nginx</span></code> command.</p></li>
</ul>
<p>In some specific sections of this description, a <code class="docutils literal notranslate"><span class="pre">custom_nginx</span></code> image can be used, which can be created with the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>nginx_files/build_nginx_docker<span class="w"> </span>-t<span class="w"> </span>custom_nginx<span class="w"> </span>.<span class="w"> </span><span class="p">&amp;</span>&gt;<span class="w"> </span>/dev/null
</pre></div>
</div>
</div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">nginx</span> <span class="pre">-V</span></code> command, you can print the Nginx version, compiler version, and configure parameters. Use this to verify if you are indeed working with a custom Nginx build.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>experiment_nginx<span class="w"> </span>custom_nginx<span class="w"> </span>nginx<span class="w"> </span>-V
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>nginx version: nginx/1.27.3
built by gcc 12.2.0 (Debian 12.2.0-14) 
configure arguments: --conf-path=/etc/nginx/nginx.conf --with-http_stub_status_module
</pre></div>
</div>
</div>
</div>
</section>
<div class="toctree-wrapper compound">
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "bash"
        },
        kernelOptions: {
            name: "bash",
            path: "./other"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'bash'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="redis/zset.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Zset</p>
      </div>
    </a>
    <a class="right-next"
       href="nginx/reverse_proxy.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Reverse proxy</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables">Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location">Location</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#server">Server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reverse-proxy">Reverse proxy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logs">Logs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-management">Connections management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-nginx">Build nginx</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Fedor Kobak
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>