<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Knowledge - GINI coeficient</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../machine_learning/models_selection_methods/l2_regularisation.html">Machine learning</a></li><li class="breadcrumb-item"><a href="../../machine_learning/metrics/CAP.html">Metrics</a></li><li class="breadcrumb-item"><a href="../../machine_learning/metrics/GINI.html">GINI coeficient</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Knowledge</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Machine learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../machine_learning/models_selection_methods/l2_regularisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L2 (Ridge regularisation)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../machine_learning/data_transformations/tf_idf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TF-IDF</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Metrics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../machine_learning/metrics/CAP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAP curve</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../machine_learning/metrics/GINI.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">GINI coeficient</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Basic</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Data types</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/set.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">set</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/dict.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dict</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/str.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">str</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/frozenset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">frozenset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/tuple.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tuple</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/basic_datatypes/list.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">list</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Path settings</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/paths_settings/pythonpath.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python path</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/paths_settings/pathlib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pathlib</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Operators</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/exceptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exceptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/virtual_environment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Virutal environment in python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>collections</code> library</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/excel_export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">To excel import</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/logging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/multi_threads.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multithreads in python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/basics/ipython_magics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">IPython magics</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Pandas</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">Data types</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/data_types/datetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">datetime</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/data_types/columns_by_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Columns by types</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/loc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">&lt;DataFrame/Series&gt;.loc</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/groupby.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Groupby</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/data_visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data visualisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/pandas/read_sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">pandas.read_sql</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">Sklearn</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/sklearn/pipeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pipeline</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">Plotly</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/plotly/hovers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hovers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/plotly/dragmode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dragmode</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/plotly/color_from_scheme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Color from scheme</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Dash</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/dash/callbacks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Callbacks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/dash/components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Components</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/dash/select_clear_all.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Select/Clear All</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/dash/multipage_applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multipage applications</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
 <span class="menu-text">Fastapi</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/fastapi/run_application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Run application</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/fastapi/pass_arguments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pass arguments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/fastapi/return_json.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Return JSON</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
 <span class="menu-text">SQLAlchemy</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/sqlalchemy/create_table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create table</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/sqlalchemy/query.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Query</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/sqlalchemy/add_record.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Add record</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/sqlalchemy/relations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relations</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false">
 <span class="menu-text">Airflow</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/airflow/run_airflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Run airflow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/airflow/tutorial_dag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial DAG</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false">
 <span class="menu-text">Geopy</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/geopy/distances.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distances</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/geopy/request.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Request</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" aria-expanded="false">
 <span class="menu-text">Jinja2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../python/jinja2/generate_html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generate HTML</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" aria-expanded="false">
 <span class="menu-text">Docker</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/docker_commands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Docker commands</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/docker_file_instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dockerfile instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/image_creation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Image creation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/docker_volumes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Volumes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/logs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logging in docker</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" aria-expanded="false">
 <span class="menu-text">Network</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-18" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/ports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ports</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/container_connection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Container connection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/default_networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Default networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/container_communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Containers communication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/local_network.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Local network</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Docker/network/small_features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Small features</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" aria-expanded="false">
 <span class="menu-text">Git</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-19" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/init.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Init repository</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/file_stages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">File statuses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/commit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Commit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/diff.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Difference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/checkout.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Checkout</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/branches.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Branches</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/log.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/merge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Merge</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/previous_commit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Previous commit <code>~</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../git/ignore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How git ignore works</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" aria-expanded="false">
 <span class="menu-text">Postgres</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-20" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/build_container.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Build container</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/NULL_conditions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NULL conditions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/conditions_on_agregats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conditions on agregats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/grouping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grouping (ORDER BY)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/unique_values.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unique values (DISTINCT)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JOIN</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/expand_array.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Expand array (UNNEST)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/load_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Load tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/first_last_value.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">First/last value</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/json_datatype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JSON data type</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/special_cases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Special cases</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" aria-expanded="false">
 <span class="menu-text">Python interaction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-21" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/python_interaction/python_from_container.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python from container</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/python_interaction/python_on_host.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python on host</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../postgres/python_interaction/create_database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create database</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" aria-expanded="false">
 <span class="menu-text">Layout</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-22" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sources</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false">
 <span class="menu-text">HTML</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-23" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/html/other.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/html/tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tables</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" aria-expanded="false">
 <span class="menu-text">CSS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-24" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/css/other.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/css/style_application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Style application</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/css/margin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Margin (out space)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/css/padding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Padding (in space)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/css/overflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overflow</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../layout/forms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Forms</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false">
 <span class="menu-text">Other</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-25" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../other/linux_backup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to linux backup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../other/python_apache.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python with apache</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#content" id="toc-content" class="nav-link active" data-scroll-target="#content">Content</a></li>
  <li><a href="#basic-gini-definition" id="toc-basic-gini-definition" class="nav-link" data-scroll-target="#basic-gini-definition">Basic GINI definition</a>
  <ul class="collapse">
  <li><a href="#graphical-representation-of-gini" id="toc-graphical-representation-of-gini" class="nav-link" data-scroll-target="#graphical-representation-of-gini">Graphical representation of GINI</a></li>
  </ul></li>
  <li><a href="#gini-as-formula" id="toc-gini-as-formula" class="nav-link" data-scroll-target="#gini-as-formula"><span class="math inline">\(GINI\)</span> as formula</a>
  <ul class="collapse">
  <li><a href="#area-under-model-cup" id="toc-area-under-model-cup" class="nav-link" data-scroll-target="#area-under-model-cup">Area under model <span class="math inline">\(CUP\)</span></a></li>
  <li><a href="#area-under-ideal-cup" id="toc-area-under-ideal-cup" class="nav-link" data-scroll-target="#area-under-ideal-cup">Area under ideal <span class="math inline">\(CUP\)</span></a></li>
  <li><a href="#gini" id="toc-gini" class="nav-link" data-scroll-target="#gini"><span class="math inline">\(GINI\)</span></a></li>
  </ul></li>
  <li><a href="#gini-auc_roc-relation" id="toc-gini-auc_roc-relation" class="nav-link" data-scroll-target="#gini-auc_roc-relation"><span class="math inline">\(GINI\)</span> &amp; <span class="math inline">\(AUC_{roc}\)</span> relation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GINI coeficient</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Metric used to evaluate the quality of classification algorithms.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> roc_curve, auc</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.distributions.empirical_distribution <span class="im">import</span> ECDF</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="content" class="level2">
<h2 class="anchored" data-anchor-id="content">Content</h2>
<ol type="1">
<li><a href="#basic_gini_header">Basic GINI definition</a>;</li>
<li><a href="#gini_as_formula"><span class="math inline">\(GINI\)</span> as formula</a>;</li>
<li><a href="#gini_relation_with_roc_header"><span class="math inline">\(GINI\)</span> &amp; <span class="math inline">\(AUC_{roc}\)</span> relation</a>.</li>
</ol>
</section>
<section id="basic-gini-definition" class="level2">
<h2 class="anchored" data-anchor-id="basic-gini-definition">Basic GINI definition</h2>
<p><a id="basic_gini_header"></a></p>
<p>Today, GINI is usually expressed through the ROC AUC, but in fact GINI originally had a separate definition through <a href="https://fedorkobak.github.io/knowledge/machine_learning/metrics/CAP.html">CAP curve</a>.</p>
<p>GINI for some model, is the ratio of the areas between the CAP curve of the model and the random CAP curve to the area between the ideal CAP and the random CAP.</p>
<section id="graphical-representation-of-gini" class="level3">
<h3 class="anchored" data-anchor-id="graphical-representation-of-gini">Graphical representation of GINI</h3>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>plot_ss <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">3</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>random_range <span class="op">=</span> np.random.rand(plot_ss)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>plot_data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"p_hat"</span> : random_range,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"y"</span> : <span class="bu">map</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> r_val: np.random.choice(</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            [<span class="dv">0</span>, <span class="dv">1</span>], p <span class="op">=</span> [<span class="dv">1</span> <span class="op">-</span> r_val, r_val]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        ), </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        random_range</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>plot_data.sort_values(<span class="st">"y"</span>,inplace <span class="op">=</span> <span class="va">True</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>plot_data[<span class="st">"p_hat_ideal"</span>] <span class="op">=</span> np.linspace(<span class="dv">1</span>,<span class="dv">0</span>, plot_data.shape[<span class="dv">0</span>])</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>fpr, or_tpr, t <span class="op">=</span> roc_curve(</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    plot_data[<span class="st">"y"</span>], plot_data[<span class="st">"p_hat"</span>],</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    drop_intermediate <span class="op">=</span> <span class="va">False</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>fpr, id_tpr, t <span class="op">=</span> roc_curve(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    plot_data[<span class="st">"y"</span>], plot_data[<span class="st">"p_hat_ideal"</span>],</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    drop_intermediate <span class="op">=</span> <span class="va">False</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>CAP_x <span class="op">=</span> np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">7</span>])</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>plt.plot(CAP_x, or_tpr, linewidth <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.plot(CAP_x, id_tpr, linewidth <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span>,<span class="dv">1</span>], [<span class="dv">0</span>,<span class="dv">1</span>], color <span class="op">=</span> <span class="st">"red"</span>, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    linestyle <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    linewidth <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    or_tpr,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    hatch <span class="op">=</span> <span class="st">"//"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    id_tpr,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    hatch <span class="op">=</span> <span class="st">"</span><span class="ch">\\\\</span><span class="st">"</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Percentage of observations"</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"$TPR$"</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>plt.ylim([<span class="op">-</span><span class="fl">0.005</span>,<span class="fl">1.005</span>])</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>plt.legend(</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model's CAP"</span>, <span class="st">"Ideal CAP"</span>, </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Random CAP"</span>, <span class="st">"A"</span>, <span class="st">"B"</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    fontsize <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="GINI_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Following the notations of the areas in the figure, we obtain:</p>
<p><span class="math display">\[GINI = \frac{A}{B}\]</span></p>
<p><strong>Or by using the alternative designation of areas (for reasons not yet known, especially popular)</strong></p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">7</span>])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>plt.plot(CAP_x, or_tpr, linewidth <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>plt.plot(CAP_x, id_tpr, linewidth <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span>,<span class="dv">1</span>], [<span class="dv">0</span>,<span class="dv">1</span>], color <span class="op">=</span> <span class="st">"red"</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    linestyle <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    linewidth <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    or_tpr,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    hatch <span class="op">=</span> <span class="st">"//"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="bu">len</span>(or_tpr))<span class="op">/</span><span class="bu">len</span>(or_tpr),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    id_tpr,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    or_tpr,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    hatch <span class="op">=</span> <span class="st">"</span><span class="ch">\\\\</span><span class="st">"</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Percentage of observations"</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"$TPR$"</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>plt.ylim([<span class="op">-</span><span class="fl">0.005</span>,<span class="fl">1.005</span>])</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>plt.legend(</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Model's CAP"</span>, <span class="st">"Ideal CAP"</span>, </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Random CAP"</span>, <span class="st">"A"</span>, <span class="st">"B"</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    fontsize <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="GINI_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><span class="math display">\[GINI = \frac{A}{B+A}\]</span></p>
</section>
</section>
<section id="gini-as-formula" class="level2">
<h2 class="anchored" data-anchor-id="gini-as-formula"><span class="math inline">\(GINI\)</span> as formula</h2>
<p><a id="gini_as_formula"></a></p>
<p>We have already given a geometric definition of <span class="math inline">\(GINI\)</span>, but for software implementation of computations or for rigorous proofs we would rather use the analytical notation of this quantity.</p>
<section id="area-under-model-cup" class="level3">
<h3 class="anchored" data-anchor-id="area-under-model-cup">Area under model <span class="math inline">\(CUP\)</span></h3>
<p>First, lets deal with the numerator of the GINI. We need to express the area under the CUP curve, which we denote by <span class="math inline">\(AUC_{cap}\)</span>.</p>
<p>Let for some set of objects numbered <span class="math inline">\(i \in \overline{1,n}\)</span> we have obtained some variable <span class="math inline">\(p_i\)</span> which is the greater the higher the probability of occurrence of the predicted feature <span class="math inline">\(y_i\)</span>. Let objects have been sorted in descending order, so <span class="math inline">\(p_i \geq p_{i+1}, i \in \overline{1,n-1}\)</span>. For example, it might look like the table below.</p>
<table class="table">
<thead>
<tr class="header">
<th><span class="math inline">\(i\)</span></th>
<th><span class="math inline">\(p_i\)</span></th>
<th><span class="math inline">\(y_i\)</span></th>
<th><span class="math inline">\(i/n\)</span></th>
<th><span class="math inline">\(TPR_i\)</span></th>
<th><span class="math inline">\(FPR_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0.8</td>
<td>1</td>
<td>0.2</td>
<td>1/3</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>0.7</td>
<td>1</td>
<td>0.4</td>
<td>2/3</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>0.6</td>
<td>0</td>
<td>0.6</td>
<td>2/3</td>
<td>1/2</td>
</tr>
<tr class="even">
<td>4</td>
<td>0.4</td>
<td>0</td>
<td>0.8</td>
<td>2/3</td>
<td>1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>0.2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>The area under an arbitrary curve <span class="math inline">\(AUC\)</span> which is the set of points <span class="math inline">\((x_i,y_i)\)</span> connected by lines can be written as:</p>
<p><span class="math display">\[AUC = \sum_{i=1}^{n-1} (x_{i+1}-x_i)(y_{i} + y_{i+1})/2.\]</span></p>
<p>In <span class="math inline">\(CAP\)</span> curve case on the abscissa is the fraction of observations for which <span class="math inline">\(p_i\)</span> is greater than some threshold or <span class="math inline">\(i/n\)</span>, on the ordinate <span class="math inline">\(TPR_i\)</span>. So assuming that <span class="math inline">\(TPR_0 = 0\)</span> we obtain the analytical notation <span class="math inline">\(AUC_{cap}\)</span>:</p>
<p><span class="math display">\[AUC_{cap} = \sum_{i=0}^{n-1}([i+1]/n - i/n)(TPR_{i+1} + TPR_i)/2 = \sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)/2n.\]</span></p>
<p>Obviously, the area between the <span class="math inline">\(CUP\)</span> curve of the estimated model and the <span class="math inline">\(CUP\)</span> curve of the random classifier is then expressed:</p>
<p><span class="math display">\[AUC_{cap}' = \sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)/2n - 0.5.\]</span>.</p>
</section>
<section id="area-under-ideal-cup" class="level3">
<h3 class="anchored" data-anchor-id="area-under-ideal-cup">Area under ideal <span class="math inline">\(CUP\)</span></h3>
<p>Now lets deal with the denominator of the <span class="math inline">\(CAP\)</span> curve.</p>
<p>In the general case, the ideal <span class="math inline">\(CAP\)</span> curve takes the form displayed by the following cell:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>y_rel_ideal <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>x_rel <span class="op">=</span> [i<span class="op">/</span><span class="dv">5</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">6</span>)]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">7</span>])</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>plt.plot(x_rel, y_rel_ideal)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span>, <span class="fl">0.6</span>], [<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>,<span class="dv">0</span>],</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span>, hatch <span class="op">=</span> <span class="st">"//"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.fill_between(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.6</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">1</span>,<span class="dv">1</span>],</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="dv">0</span>, hatch <span class="op">=</span> <span class="st">"</span><span class="ch">\\\\</span><span class="st">"</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>plt.yticks([<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>plt.xticks(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span>, <span class="fl">0.6</span>, <span class="dv">1</span>],</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"0"</span>, <span class="st">"$\gamma$"</span>, <span class="st">"1"</span>],</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    fontsize <span class="op">=</span> <span class="dv">14</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>plt.title(</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Ideal CAP curve"</span>,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    fontsize <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Percentage of observations"</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="GINI_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>All observations with feature manifestation have greater <span class="math inline">\(p_i\)</span> than without feature manifestation. Therefore, the <span class="math inline">\(CAP\)</span> curve grows until all objects in which the manifestation of the investigated trait is observed are finished. So in finishes it growth in point:</p>
<p><span class="math display">\[\gamma = \frac{\sum_{i=1}^ny_i}{n}.\]</span></p>
<p>It turns out that this area decomposes into 2 figures:</p>
<ul>
<li>A triangle, highlighted by a hatching slanted to the left;</li>
<li>A rectangle marked by a hatching slanted to the right.</li>
</ul>
<p>And can be written:</p>
<p><span class="math display">\[AUC^I = \gamma/2 + (1-\gamma) = 1 - \gamma/2.\]</span></p>
<p>Then the area between the ideal CAP curve and the random CAP curve is:</p>
<p><span class="math display">\[AUC'^I = 1 - \gamma/2 - 0.5=0.5 - \gamma/2.\]</span></p>
<p>Or by substituting <span class="math inline">\(\gamma\)</span>:</p>
<p><span class="math display">\[AUC'^I = 0.5 - \frac{\sum_{i=1}^{n}y_i}{2n}.\]</span>.</p>
</section>
<section id="gini" class="level3">
<h3 class="anchored" data-anchor-id="gini"><span class="math inline">\(GINI\)</span></h3>
<p>Finally, combine the previous two steps to write <span class="math inline">\(GINI\)</span>:</p>
<p><span class="math display">\[GINI=\frac{AUC'_{cap}}{AUC'^I}=\frac{\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)/2n - 0.5}{0.5 - \frac{\sum_{j=1}^{n}y_j}{2n}}=\]</span> <span class="math display">\[=\frac{\left[\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)-n\right]/2n}{\frac{n - \sum_{j=1}^{n}y_j}{2n}}=\frac{\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)-n}{n - \sum_{j=1}^{n}y_j}.\]</span></p>
<p>Or by omitting conversions:</p>
<p><span class="math display">\[GINI=\frac{\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)-n}{n - \sum_{j=1}^{n}y_j}.\]</span></p>
</section>
</section>
<section id="gini-auc_roc-relation" class="level2">
<h2 class="anchored" data-anchor-id="gini-auc_roc-relation"><span class="math inline">\(GINI\)</span> &amp; <span class="math inline">\(AUC_{roc}\)</span> relation</h2>
<p><a id="gini_relation_with_roc_header"></a></p>
<p>All of the above refers to the basic definition of the <span class="math inline">\(GINI\)</span> coefficient. But today in kaggle and in the industry, <span class="math inline">\(GINI\)</span> is more often expressed through <span class="math inline">\(AUC_{roc}\)</span>:</p>
<p><span class="math display">\[GINI = 2(AUC_{roc} - 0.5) = 2AUC_{roc} - 1 \tag{3.1}\]</span></p>
<p>In my practice I encountered a situation when I was counting GINI using the formula familiar today, and my colleagues used a more classical formula, as a result of which there were conflicts in which I was accused of using the wrong formula. Therefore, I will further prove that both approaches to calculating GINI always lead to the same result.</p>
<p>So we need to prove the statement <span class="math inline">\((3.1)\)</span>.</p>
<p>Let us denote at once that <span class="math inline">\(FPR_0=TPR_0=0\)</span> - values that meet the maximum threshold where none of the values can be assigned to a positive class.</p>
<p><strong>Lets write the area under the ROC of the curve, which will be the exponent <span class="math inline">\(AUC_{roc}\)</span></strong>:</p>
<p><span class="math display">\[AUC_{roc} = \sum_{i=0}^{n-1} (FPR_{i+1} - FPR_i)(TPR_{i+1} + TPR_i)/2.\]</span></p>
<p><span class="math display">\[ 2\left[\sum_{i=0}^{n-1} (FPR_{i+1} - FPR_i)(TPR_{i+1} + TPR_i)/2\right] -1 =
\frac{\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)-n}{n - \sum_{j=1}^{n}y_j} \tag{3.2}.\]</span></p>
<p>We will work with the left part of the identity:</p>
<p><span class="math display">\[
\left[\sum_{i=0}^{n-1} (FPR_{i+1} - FPR_i)(TPR_{i+1} + TPR_i)\right] -1 \tag{3.3}
\]</span></p>
<p>Lets discuss the properties of expression:</p>
<p><span class="math display">\[
(FPR_{i+1} - FPR_i)
\]</span></p>
<p><span class="math inline">\(FPR\)</span> (the fraction of false positive predictions) increases only for predictions without the manifestation of the trait. And, for an observation without the manifestation of the trait, it increases by the fraction that is occupied by one observation without manifestation of the trait:</p>
<p><span class="math display">\[
(FPR_{i+1} - FPR_i)=\begin{cases}
    0, y_i=1;\\
    \frac{1}{n-\sum_j^n y_j}, y_i=0.
\end{cases}
\]</span></p>
<p>Where <span class="math inline">\((n-\sum_j^n y_j)\)</span> - number of observations without the trait,  <span class="math inline">\((\frac{1}{n-\sum_j^n y_j})\)</span> - the proportion of one observation in observations with a manifestation of the trait.</p>
<p>Then the expression <span class="math inline">\((3.3)\)</span> can be rewritten as follows:</p>
<p><span class="math display">\[
\left[\sum_{i|y_{i+1}=0} \frac{1}{n-\sum_{j=1}^n y_j}(TPR_{i+1} + TPR_i)\right] -1
\tag{3.4}
\]</span></p>
<p><em>That is, summation can be performed only for terms for which <span class="math inline">\(y_{i+1}=0\)</span>, all other terms will be zero. Moreover, in non-zero terms one of the multipliers is a constant with respect to the summation operator.</em></p>
<p>Let us return to expression <span class="math inline">\((3.2)\)</span> and put the results <span class="math inline">\((3.4)\)</span> into it.</p>
<p><span class="math display">\[
\left[\sum_{i|y_{i+1}=0} \frac{1}{n-\sum_{j=1}^n y_j}(TPR_{i+1} + TPR_i)\right] -1 = \frac{\sum_{i=0}^{n-1}(TPR_{i+1} + TPR_i)-n}{n - \sum_{j=1}^{n}y_j}
\Leftrightarrow
\]</span></p>
<p><span class="math display">\[
\Leftrightarrow
\left[\sum_{i|y_{i+1}=0} \frac{1}{n-\sum_{j=1}^n y_j}(TPR_{i+1} + TPR_i)\right] -1 =
\left[\sum^{n-1}_{i=0}
\frac{1}{n - \sum_{j=1}^{n}y_j}(TPR_{i+1}+TPR_i)
\right] - \frac{n}{n - \sum_{j=1}^{n}y_j}
\Leftrightarrow
\]</span></p>
<p><span class="math display">\[
\Leftrightarrow
\left[\sum^{n-1}_{i=0}
    \frac{1}{n - \sum_{j=1}^{n}y_j}(TPR_{i+1}+TPR_i)
    \right] -
    \left[\sum_{i|y_{i+1}=0} \frac{1}{n-\sum_{j=1}^n y_j}(TPR_{i+1} + TPR_i)\right] -
    \frac{n}{n - \sum_{j=1}^{n}y_j} + 1
= 0
\]</span></p>
<p>Pay attention to the expressions in square brackets - they completely coincide, only the number of summation components differs, i.e.&nbsp;after the subtraction only those components that are not in the subtractor will remain:</p>
<p><span class="math display">\[
\left[
    \sum_{i|y_{i+1}=1} \frac{1}{n-\sum_{j=1}^n y_j}(TPR_{i+1} + TPR_i)
\right] -
    \frac{n}{n - \sum_{j=1}^{n}y_j} + 1
= 0
\tag{3.5}\]</span></p>
<p><strong>Let us discuss the interim results</strong>. We have shown that expression <span class="math inline">\((3.2)\)</span> which we need to prove is equivalent to expression <span class="math inline">\((3.5)\)</span>, so by proving expression <span class="math inline">\((3.5)\)</span> we arrive at the truth of expression <span class="math inline">\((3.2)\)</span>.</p>
<p>Let us perform a number of transformations on the expression <span class="math inline">\((3.5)\)</span>.</p>
<p><span class="math display">\[
\left[
    \sum_{i|y_{i+1}=1} \frac{1}{n-\sum_{i=1}^n y_i}(TPR_{i+1} + TPR_i)
\right] -
    \frac{n}{n - \sum_{i=1}^{n}y_i} + 1
= 0 \Leftrightarrow
\]</span></p>
<p><span class="math display">\[
\Leftrightarrow
\left[
    \sum_{i|y_{i+1}=1} \frac{1}{n-\sum_{i=1}^n y_i}(TPR_{i+1} + TPR_i)
\right] -
    \frac{\sum_{i=1}^{n}y_i}{n - \sum_{i=1}^{n}y_i}
= 0
\Leftrightarrow
\]</span></p>
<p><span class="math display">\[
\Leftrightarrow
\frac{1}{n-\sum_{i=1}^n y_i}
\left\{
    \left[
        \sum_{i|y_{i+1}=1} (TPR_{i+1} + TPR_i)
    \right] -
       \sum_{i=1}^{n}y_i
\right\}
= 0
\]</span></p>
<p>Given that the expression <span class="math inline">\(\frac{1}{n-\sum_{i=1}^n y_i}\)</span> is non-negative. To fulfil the last identity it is necessary that:</p>
<p><span class="math display">\[
\left[
    \sum_{i|y_{i+1}=1} (TPR_{i+1} + TPR_i)
\right] -
   \sum_{i=1}^{n}y_i
=0 \tag{3.6}\]</span></p>
<p>Consider the sum in square brackets:</p>
<p><span class="math display">\[\sum_{i|y_{i+1}=1} (TPR_{i+1} + TPR_i)\]</span></p>
<p>Lets rewrite it in a simpler way, but keeping in mind that the summation is carried out only on observations with the manifestation of the trait:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} (TPR_{i+1} + TPR_i)\]</span></p>
<p>Where <span class="math display">\[m=\sum_{i=1}^{n}y_i \tag{3.7}\]</span></p>
<p>Now recall that <span class="math inline">\(TPR\)</span> is the proportion of customers, with manifestation, of the trait for whom the manifestation of the trait was predicted. And it can be written as:</p>
<p><span class="math display">\[TPR_i=\frac{i}{m} \tag{3.8}\]</span></p>
<p>Returning to the identity <span class="math inline">\((3.6)\)</span> and using the results <span class="math inline">\((3.7)\)</span> and <span class="math inline">\((3.8)\)</span> we obtain:</p>
<p><span class="math display">\[
\left[
\sum_{i=0}^{m-1} \left(\frac{i+1}{m} + \frac{i}{m}\right)
\right]
-m=0
\Leftrightarrow
\sum_{i=0}^{m-1} \left(\frac{2i+1}{m}\right)=m
\]</span></p>
<p>Finally:</p>
<p><span class="math display">\[
\sum_{i=0}^{m-1} 2i+1 = m^2
\]</span></p>
<p>By proving this identity we prove that the whole chain of identities above is fulfilled. There is already a very similar proof presented <a href="https://math.stackexchange.com/questions/2507815/finding-the-formula-for-the-summation-sum-i-1n-2i-1-135-2n-1?newreg=662a6da934824f24ad28bdbb360d918d">here</a>. Let us give a similar proof for our example.</p>
<p>Lets spell out the expression on the left:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} 2i+1 = 1 + 3 + 5 + ... + 2(m-1)+1.\]</span></p>
<p>There are not enough even numbers in the summation add and subtract them:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} 2i+1 = \{1 + 3 + 5 + ... + [2(m-1)+1]\} + \{2 + 4 + 6 + ... + 2(m-1)\} - \{2 + 4 + 6 + ... + 2(m-1)\}.\]</span></p>
<p>We combine and conjugate the components of the first and second curly brackets and take 2 out of the second brackets:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} 2i+1 = \{1 + 2 + 3 + 4 + ... + 2(m-1) + [2(m-1)+1]\} - 2\{1 + 2 + 3 + ... + (m-1)\}.\]</span></p>
<p>Returning to the summation operator we obtain:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} 2i+1 = \left[\sum_{i=1}^{2(m-1)+1}i\right] - 2\left[\sum_{i=1}^{m-1}i\right]. \tag{3.9}\]</span></p>
<p>In the resulting expression, an expression of the form occurs twice:</p>
<p><span class="math display">\[\sum_{i=1}^\nu i.\]</span></p>
<p><a href="https://r-knott.surrey.ac.uk/runsums/triNbproof.html">Here</a> you can find that:</p>
<p><span class="math display">\[2\sum_{i=1}^\nu i = \sum_{i=1}^\nu i + \sum_{i=1}^\nu i = [1 + 2 + ... + (\nu-1) + \nu] + [\nu + (\nu-1) + ... + 2 + 1]=\]</span><br> <span class="math display">\[=(\nu+1) + (\nu-1+2) + ... + (2 + \nu - 1) + (\nu+1)=\]</span><br> <span class="math display">\[=(\nu+1) + (\nu+1) + ... + (\nu+1)=\]</span><br> <span class="math display">\[=\sum_{i=1}^{\nu} (\nu+1) = \nu(\nu+1)\]</span></p>
<p>So:</p>
<p><span class="math display">\[2\sum_{i=1}^\nu i = \nu(\nu+1) \Leftrightarrow \sum_{i=1}^\nu i = \frac{\nu(\nu +1)}{2}\]</span></p>
<p>Using the last results in <span class="math inline">\((3.9)\)</span>: <span class="math display">\[
\sum_{i=0}^{m-1} 2i+1 =
\]</span> <span class="math display">\[
=\frac{[2(m-1)+1]([2(m-1)+1] + 1)}{2} - 2\frac{[m-1]([m-1]+1)}{2}=.
\]</span> <span class="math display">\[
=\frac{2m[2m+1]}{2} - [m-1]([m-1]+1)=
\]</span> <span class="math display">\[
=m[2m+1] - m[m-1] =
\]</span> <span class="math display">\[
= 2m^2+m-m^2-m=
\]</span> <span class="math display">\[
= m^2
\]</span></p>
<p>Finally:</p>
<p><span class="math display">\[\sum_{i=0}^{m-1} 2i+1 = m^2\]</span></p>
<p>Thus the identity <span class="math inline">\((3.6)\)</span> is fulfilled, followed by the correctness of the identity <span class="math inline">\((3.5)\)</span> and followed by the correctness of the identity <span class="math inline">\((3.1)\)</span> <span class="math inline">\(\boxtimes\)</span>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>