# многоэтапный dockerfile
FROM python:3.10 AS BUILDER

WORKDIR some_dir
COPY example.csv example.csv
COPY requirements.txt requirements.txt
COPY generation.py generation.py

RUN python -m pip install --upgrade pip && pip install -r requirements.txt
RUN python generation.py

FROM ubuntu:22.04
WORKDIR some_dir
COPY --from=BUILDER /some_dir/means.csv /some_dir/means.csv
CMD ["cat", "means.csv"]